From 7d0615457f5f26bab3900804d60e9b96c09738c9 Mon Sep 17 00:00:00 2001
From: Jeremy Harris <jgh146exb@wizmail.org>
Date: Sun, 15 Mar 2020 21:08:28 +0000
Subject: [PATCH 32/33] Fix spurious detection of timeout while writing to
 transport filter

(cherry picked from commit 130212d30d47e588c2bc03edcfce11bf3857da03)
---
 doc/ChangeLog | 2 ++
 src/transport.c   | 1 +
 2 files changed, 3 insertions(+)

diff --git a/doc/ChangeLog b/doc/ChangeLog
index b87a32b8e..f3e9bd9c7 100644
--- a/doc/ChangeLog
+++ b/doc/ChangeLog
@@ -81,6 +81,8 @@ JH/28 Bug 2533: Fix expansion of ${tr } item.  When called in some situations
 JH/29 Bug 2537: Fix $mime_part_count.  When a single connection had a non-mime
       message following a mime one, the variable was not reset.
 
+JH/31 Fix spurious detection of timeout while writing to transport filter.
+
 
 Exim version 4.93
 -----------------
diff --git a/src/transport.c b/src/transport.c
index df7fd1628..70e96c065 100644
--- a/src/transport.c
+++ b/src/transport.c
@@ -253,6 +253,7 @@ for (int i = 0; i < 100; i++)
 
   else
     {
+    sigalrm_seen = FALSE;
     ALARM(local_timeout);
 
     rc =
-- 
2.25.1

